# üîå API Endpoints - Cursor Compatible Embedding Server

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ endpoints

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ endpoints

**üéØ –í—Å–µ endpoints –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**
- **–≠–º–±–µ–¥–¥–∏–Ω–≥–∏**: `/v1/embeddings`, `/api/embeddings`, `/embeddings`
- **–ú–æ–¥–µ–ª–∏**: `/v1/models`, `/api/models`, `/models`
- **–°—Ç–∞—Ç—É—Å**: `/health`, `/stats`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `/docs`, `/openapi.json`
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: `/` (–∫–æ—Ä–Ω–µ–≤–æ–π endpoint)

#### 1. `POST /v1/embeddings`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–æ—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è Cursor)

**–ó–∞–ø—Ä–æ—Å**:
```json
{
  "input": ["—Ç–µ–∫—Å—Ç –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞"] | "–æ–¥–∏–Ω–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç",
  "model": "text-embedding-ada-002",
  "encoding_format": "float"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "object": "list",
  "data": [
    {
      "object": "embedding",
      "embedding": [0.1, 0.2, ...],
      "index": 0
    }
  ],
  "model": "text-embedding-ada-002",
  "usage": {
    "prompt_tokens": 10,
    "total_tokens": 10
  }
}
```

#### 2. `GET /v1/models`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

**–û—Ç–≤–µ—Ç**:
```json
{
  "object": "list",
  "data": [
    {
      "id": "text-embedding-ada-002",
      "object": "model",
      "created": 1735142223,
      "owned_by": "local"
    },
    {
      "id": "qwen3-embedding-8b",
      "object": "model", 
      "created": 1735142223,
      "owned_by": "local"
    }
  ]
}
```

### ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### 3. `GET /health`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

**–û—Ç–≤–µ—Ç**:
```json
{
  "status": "healthy",
  "models_loaded": {"embedding": true, "reranker": false},
  "gpu_available": true,
  "timestamp": "2024-12-26T10:30:00"
}
```

#### 4. `GET /stats`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–û—Ç–≤–µ—Ç**:
```json
{
  "models_loaded": {
    "embedding": true,
    "reranker": false,
    "llm": false
  },
  "index_size": 0,
  "cache_dir": "./cache",
  "device": "cuda",
  "gpu_memory": {
    "total_gb": 12.0,
    "allocated_gb": 2.1,
    "reserved_gb": 2.5
  }
}
```

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ endpoints (FastAPI)

#### 5. `GET /docs`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 6. `GET /openapi.json`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: OpenAPI —Å—Ö–µ–º–∞

#### 7. `GET /redoc`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Cursor

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Cursor:
```
Custom OpenAI Endpoint: http://127.0.0.1:11435
API Key: local-key (–ª—é–±–∞—è —Å—Ç—Ä–æ–∫–∞)
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –≤ Cursor:
- `text-embedding-ada-002` (–æ—Å–Ω–æ–≤–Ω–∞—è)
- `text-embedding-3-small`
- `text-embedding-3-large`
- `qwen3-embedding-8b`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ curl:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://127.0.0.1:11435/health

# –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
curl http://127.0.0.1:11435/v1/models

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞
curl -X POST http://127.0.0.1:11435/v1/embeddings \
  -H "Content-Type: application/json" \
  -d '{"input": "Hello world", "model": "text-embedding-ada-002"}'
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# Python —Ç–µ—Å—Ç
python test_endpoints.py

# Batch —Ç–µ—Å—Ç
test_curl.bat
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å endpoints

| Endpoint | –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ | –ù–∞–≥—Ä—É–∑–∫–∞ |
|----------|--------------|----------|
| `/health` | ~1ms | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è |
| `/v1/models` | ~1ms | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è |
| `/stats` | ~5ms | –ù–∏–∑–∫–∞—è |
| `/v1/embeddings` | ~100-200ms | –í—ã—Å–æ–∫–∞—è (GPU) |

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Endpoint –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞: `start_server.bat`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç: `netstat -an | findstr 11435`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –û—à–∏–±–∫–∞ 500 –≤ `/v1/embeddings`:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–ø–∫–µ `models/`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GPU –ø–∞–º—è—Ç—å: `nvidia-smi`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏

### Cursor –Ω–µ –≤–∏–¥–∏—Ç —Å–µ—Ä–≤–µ—Ä:
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL —Ç–æ—á–Ω–æ `http://127.0.0.1:11435`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Cursor –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç: `curl http://127.0.0.1:11435/health`

## üéâ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

‚úÖ **–í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**  
‚úÖ **OpenAI API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**  
‚úÖ **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞**  
‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã**

–°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å Cursor! 